{"version":3,"sources":["../../../../../../Desktop/cmd-main/src/app/dashboard/accountant/pm-advances/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useSession } from \"next-auth/react\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow\n} from \"@/components/ui/table\"\nimport { AlertCircle, Loader2, TrendingDown, Plus } from \"lucide-react\"\nimport { Alert, AlertDescription } from \"@/components/ui/alert\"\nimport { Progress } from \"@/components/ui/progress\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger\n} from \"@/components/ui/dialog\"\nimport { Label } from \"@/components/ui/label\"\nimport { Input } from \"@/components/ui/input\"\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue\n} from \"@/components/ui/select\"\n\ninterface User {\n  id: string\n  name: string\n  email: string\n}\n\ninterface Project {\n  id: string\n  name: string\n}\n\ninterface PMAdvanceDetail {\n  id: string\n  user: User\n  project: Project\n  amount: number\n  remainingAmount: number\n  totalSpent: number\n  spendingBreakdown: {\n    unitExpenses: number\n    operationalExpenses: number\n  }\n  percentageUsed: number\n  percentageRemaining: number\n  operationalExpenses: any[]\n  expenses: any[]\n  createdAt: string\n}\n\nexport default function PMAdvancesPage() {\n  const { data: session } = useSession()\n  const { toast } = useToast()\n  const [advances, setAdvances] = useState<PMAdvanceDetail[]>([])\n  const [isFetching, setIsFetching] = useState(true)\n  const [isDialogOpen, setIsDialogOpen] = useState(false)\n  const [isCreating, setIsCreating] = useState(false)\n  const [projects, setProjects] = useState<Project[]>([])\n  const [managers, setManagers] = useState<User[]>([])\n  const [formData, setFormData] = useState({\n    userId: \"\",\n    projectId: \"\",\n    amount: \"\"\n  })\n\n  // Fetch PM Advances\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setIsFetching(true)\n        const [advancesRes, projectsRes, managersRes] = await Promise.all([\n          fetch(\"/api/pm-advances\"),\n          fetch(\"/api/projects\"),\n          fetch(\"/api/users?role=PROJECT_MANAGER\")\n        ])\n\n        if (advancesRes.ok) {\n          const data = await advancesRes.json()\n          setAdvances(Array.isArray(data) ? data : [])\n        }\n\n        if (projectsRes.ok) {\n          const data = await projectsRes.json()\n          setProjects(Array.isArray(data) ? data : [])\n        }\n\n        // Get Project Managers (users with role PROJECT_MANAGER)\n        if (managersRes.ok) {\n          const managersData = await managersRes.json()\n          setManagers(Array.isArray(managersData) ? managersData : [])\n        }\n      } catch (error) {\n        console.error(\"Error fetching data:\", error)\n        toast({\n          title: \"Error\",\n          description: \"Failed to load data. Please refresh the page.\",\n          variant: \"destructive\"\n        })\n      } finally {\n        setIsFetching(false)\n      }\n    }\n\n    fetchData()\n  }, [toast])\n\n  const handleCreateAdvance = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!formData.userId || !formData.projectId || !formData.amount) {\n      toast({\n        title: \"خطأ\",\n        description: \"يرجى ملء جميع الحقول المطلوبة\",\n        variant: \"destructive\"\n      })\n      return\n    }\n\n    try {\n      setIsCreating(true)\n      const response = await fetch(\"/api/pm-advances\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          userId: formData.userId,\n          projectId: formData.projectId,\n          amount: parseFloat(formData.amount)\n        })\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || \"Failed to create advance\")\n      }\n\n      const newAdvance = await response.json()\n      \n      // The API returns { message, advance }, we need advance\n      const advanceData = newAdvance.advance || newAdvance\n      \n      // Fetch the full data including spending breakdown\n      const updatedAdvancesRes = await fetch(\"/api/pm-advances\")\n      if (updatedAdvancesRes.ok) {\n        const updatedAdvances = await updatedAdvancesRes.json()\n        setAdvances(Array.isArray(updatedAdvances) ? updatedAdvances : [])\n      }\n      \n      setIsDialogOpen(false)\n      setFormData({ userId: \"\", projectId: \"\", amount: \"\" })\n\n      toast({\n        title: \"نجح\",\n        description: \"تم إنشاء العهدة بنجاح\"\n      })\n    } catch (error) {\n      console.error(\"Error creating advance:\", error)\n      toast({\n        title: \"خطأ\",\n        description: error instanceof Error ? error.message : \"Failed to create advance\",\n        variant: \"destructive\"\n      })\n    } finally {\n      setIsCreating(false)\n    }\n  }\n\n  if (isFetching) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">عهد مديري المشاريع</h1>\n          <p className=\"text-muted-foreground mt-2\">تتبع العهد المخصصة والصرفيات من كل عهدة</p>\n        </div>\n        <div className=\"grid gap-4 md:grid-cols-4\">\n          {[1, 2, 3, 4].map((i) => (\n            <Card key={i}>\n              <CardHeader className=\"pb-2\">\n                <Skeleton className=\"h-4 w-20\" />\n              </CardHeader>\n              <CardContent>\n                <Skeleton className=\"h-8 w-32\" />\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    )\n  }\n\n  const totalAllocated = advances.reduce((sum, adv) => sum + adv.amount, 0)\n  const totalSpent = advances.reduce((sum, adv) => sum + adv.totalSpent, 0)\n  const totalRemaining = advances.reduce((sum, adv) => sum + adv.remainingAmount, 0)\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Button */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">عهد مديري المشاريع</h1>\n          <p className=\"text-muted-foreground mt-2\">تتبع العهد المخصصة والصرفيات من كل عهدة</p>\n        </div>\n        <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n          <DialogTrigger asChild>\n            <Button className=\"gap-2\">\n              <Plus className=\"h-4 w-4\" />\n              إضافة عهدة جديدة\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-md\">\n            <DialogHeader>\n              <DialogTitle>إضافة عهدة جديدة</DialogTitle>\n              <DialogDescription>\n                خصص عهدة مالية لمدير مشروع معين\n              </DialogDescription>\n            </DialogHeader>\n\n            <form onSubmit={handleCreateAdvance} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"manager\">مدير المشروع *</Label>\n                <Select value={formData.userId} onValueChange={(v) => setFormData({ ...formData, userId: v })}>\n                  <SelectTrigger id=\"manager\">\n                    <SelectValue placeholder=\"اختر مدير المشروع\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {managers.map((manager) => (\n                      <SelectItem key={manager.id} value={manager.id}>\n                        {manager.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"project\">المشروع *</Label>\n                <Select value={formData.projectId} onValueChange={(v) => setFormData({ ...formData, projectId: v })}>\n                  <SelectTrigger id=\"project\">\n                    <SelectValue placeholder=\"اختر المشروع\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {projects.map((project) => (\n                      <SelectItem key={project.id} value={project.id}>\n                        {project.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"amount\">المبلغ (جنيه) *</Label>\n                <Input\n                  id=\"amount\"\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0\"\n                  placeholder=\"0.00\"\n                  value={formData.amount}\n                  onChange={(e) => setFormData({ ...formData, amount: e.target.value })}\n                />\n              </div>\n\n              <DialogFooter>\n                <Button type=\"button\" variant=\"outline\" onClick={() => setIsDialogOpen(false)}>\n                  إلغاء\n                </Button>\n                <Button type=\"submit\" disabled={isCreating}>\n                  {isCreating && <Loader2 className=\"h-4 w-4 animate-spin ml-2\" />}\n                  إضافة العهدة\n                </Button>\n              </DialogFooter>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid gap-4 md:grid-cols-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium\">إجمالي العهد</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{totalAllocated.toFixed(2)} جنيه</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">{advances.length} عهدة نشطة</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium\">المصروف</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{totalSpent.toFixed(2)} جنيه</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {totalAllocated > 0 ? ((totalSpent / totalAllocated) * 100).toFixed(1) : 0}% من الإجمالي\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium\">المتبقي</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{totalRemaining.toFixed(2)} جنيه</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {totalAllocated > 0 ? ((totalRemaining / totalAllocated) * 100).toFixed(1) : 0}% من الإجمالي\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium\">تحذير</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-red-600\">\n              {advances.filter((adv) => adv.percentageUsed >= 80).length}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">عهد استُنفذت أكثر من 80%</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Advances List */}\n      <div className=\"space-y-4\">\n        {advances.length === 0 ? (\n          <Card>\n            <CardContent className=\"pt-6\">\n              <Alert>\n                <AlertCircle className=\"h-4 w-4\" />\n                <AlertDescription>لا توجد عهد مسجلة حتى الآن</AlertDescription>\n              </Alert>\n            </CardContent>\n          </Card>\n        ) : (\n          advances.map((advance) => (\n            <Card key={advance.id}>\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-start justify-between\">\n                  <div>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      {advance.user.name}\n                      {advance.percentageUsed >= 80 && advance.percentageUsed < 100 && (\n                        <span className=\"inline-block px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full font-medium\">\n                          تنبيه: {advance.percentageUsed.toFixed(0)}%\n                        </span>\n                      )}\n                      {advance.percentageUsed >= 100 && (\n                        <span className=\"inline-block px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full font-medium\">\n                          استُنفذت\n                        </span>\n                      )}\n                    </CardTitle>\n                    <CardDescription className=\"mt-1\">\n                      {advance.project.name} • العهدة منذ{\" \"}\n                      {new Date(advance.createdAt).toLocaleDateString(\"ar-EG\", {\n                        year: \"numeric\",\n                        month: \"short\",\n                        day: \"numeric\"\n                      })}\n                    </CardDescription>\n                  </div>\n                  <div className=\"text-right\">\n                    <div className=\"text-2xl font-bold\">{advance.amount.toFixed(2)}</div>\n                    <div className=\"text-xs text-muted-foreground\">جنيه</div>\n                  </div>\n                </div>\n              </CardHeader>\n\n              <CardContent className=\"space-y-4\">\n                {/* Progress Bar */}\n                <div>\n                  <div className=\"flex justify-between items-center mb-2\">\n                    <span className=\"text-sm font-medium\">نسبة الاستهلاك</span>\n                    <span className=\"text-sm font-bold text-red-600\">{advance.percentageUsed.toFixed(1)}%</span>\n                  </div>\n                  <Progress value={advance.percentageUsed} className=\"h-2\" />\n                </div>\n\n                {/* Balance Breakdown */}\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <div className=\"p-3 bg-blue-50 rounded-lg\">\n                    <p className=\"text-xs text-muted-foreground mb-1\">المصروف</p>\n                    <p className=\"text-lg font-bold\">{advance.totalSpent.toFixed(2)}</p>\n                    <p className=\"text-xs text-muted-foreground mt-1\">جنيه</p>\n                  </div>\n                  <div className=\"p-3 bg-green-50 rounded-lg\">\n                    <p className=\"text-xs text-muted-foreground mb-1\">المتبقي</p>\n                    <p className=\"text-lg font-bold text-green-600\">{advance.remainingAmount.toFixed(2)}</p>\n                    <p className=\"text-xs text-muted-foreground mt-1\">جنيه</p>\n                  </div>\n                  <div className=\"p-3 bg-gray-50 rounded-lg\">\n                    <p className=\"text-xs text-muted-foreground mb-1\">الأصلي</p>\n                    <p className=\"text-lg font-bold\">{advance.amount.toFixed(2)}</p>\n                    <p className=\"text-xs text-muted-foreground mt-1\">جنيه</p>\n                  </div>\n                </div>\n\n                {/* Spending Breakdown */}\n                <div>\n                  <h4 className=\"font-semibold text-sm mb-3 flex items-center gap-2\">\n                    <TrendingDown className=\"h-4 w-4\" />\n                    تفصيل الصرفيات\n                  </h4>\n\n                  {/* Operational Expenses */}\n                  {advance.operationalExpenses && advance.operationalExpenses.length > 0 && (\n                    <div className=\"mb-4\">\n                      <p className=\"text-xs font-medium text-muted-foreground mb-2\">نفقات تشغيلية</p>\n                      <div className=\"space-y-2 ml-4 border-r-2 border-blue-200 pr-4\">\n                        {advance.operationalExpenses.slice(0, 5).map((exp) => (\n                          <div key={exp.id} className=\"flex justify-between items-center text-sm\">\n                            <span className=\"text-muted-foreground\">{exp.description}</span>\n                            <span className=\"font-semibold\">{exp.amount.toFixed(2)} جنيه</span>\n                          </div>\n                        ))}\n                        {advance.operationalExpenses.length > 5 && (\n                          <div className=\"text-xs text-muted-foreground italic\">\n                            +{advance.operationalExpenses.length - 5} نفقات أخرى\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Unit Expenses */}\n                  {advance.expenses && advance.expenses.length > 0 && (\n                    <div>\n                      <p className=\"text-xs font-medium text-muted-foreground mb-2\">نفقات الوحدات</p>\n                      <div className=\"space-y-2 ml-4 border-r-2 border-purple-200 pr-4\">\n                        {advance.expenses.slice(0, 5).map((exp) => (\n                          <div key={exp.id} className=\"flex justify-between items-center text-sm\">\n                            <span className=\"text-muted-foreground\">\n                              {exp.unit?.name || \"وحدة غير محددة\"} - {exp.description}\n                            </span>\n                            <span className=\"font-semibold\">{exp.amount.toFixed(2)} جنيه</span>\n                          </div>\n                        ))}\n                        {advance.expenses.length > 5 && (\n                          <div className=\"text-xs text-muted-foreground italic\">\n                            +{advance.expenses.length - 5} نفقات أخرى\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {!advance.operationalExpenses?.length && !advance.expenses?.length && (\n                    <p className=\"text-sm text-muted-foreground italic\">لم يتم تسجيل صرفيات بعد</p>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          ))\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}