{"version":3,"sources":["../../../../../../Desktop/cmd-main/src/app/dashboard/accountant/invoices/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useSession } from \"next-auth/react\"\nimport { FileText, DollarSign, Check, AlertCircle } from \"lucide-react\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from \"@/components/ui/dialog\"\n\ninterface Invoice {\n  id: string\n  invoiceNumber: string\n  type: string\n  amount: number\n  totalPaid: number\n  remainingBalance: number\n  isPaid: boolean\n  createdAt: string\n  unit: {\n    id: string\n    name: string\n    code: string\n    project: {\n      id: string\n      name: string\n    }\n  }\n  expenses?: Array<{\n    id: string\n    description: string\n    amount: number\n    sourceType: string\n  }>\n}\n\nexport default function InvoicesPage() {\n  const { data: session } = useSession()\n  const [invoices, setInvoices] = useState<Invoice[]>([])\n  const [loading, setLoading] = useState(true)\n  const [selectedInvoice, setSelectedInvoice] = useState<Invoice | null>(null)\n  const [showDialog, setShowDialog] = useState(false)\n  const [paymentAmount, setPaymentAmount] = useState(\"\")\n  const [paying, setPaying] = useState(false)\n  const [filter, setFilter] = useState<\"all\" | \"open\" | \"paid\" | \"partial\">(\"open\")\n\n  useEffect(() => {\n    fetchInvoices()\n  }, [])\n\n  const fetchInvoices = async () => {\n    try {\n      setLoading(true)\n      const response = await fetch(\"/api/invoices\")\n      if (response.ok) {\n        const data = await response.json()\n        setInvoices(data)\n      }\n    } catch (error) {\n      console.error(\"Error fetching invoices:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handlePayment = async () => {\n    if (!selectedInvoice) return\n\n    const amount = parseFloat(paymentAmount)\n    if (!amount || amount <= 0) {\n      alert(\"أدخل مبلغاً صحيحاً\")\n      return\n    }\n\n    if (amount > selectedInvoice.remainingBalance) {\n      alert(\"المبلغ أكبر من المستحق\")\n      return\n    }\n\n    try {\n      setPaying(true)\n      const response = await fetch(`/api/invoices/${selectedInvoice.id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ action: \"pay\", amount })\n      })\n\n      if (response.ok) {\n        setShowDialog(false)\n        setPaymentAmount(\"\")\n        fetchInvoices()\n      } else {\n        const error = await response.json()\n        alert(error.error || \"فشل الدفع\")\n      }\n    } catch (error) {\n      console.error(\"Error making payment:\", error)\n      alert(\"حدث خطأ أثناء الدفع\")\n    } finally {\n      setPaying(false)\n    }\n  }\n\n  const filteredInvoices = invoices.filter(inv => {\n    if (filter === \"open\") return inv.remainingBalance > 0\n    if (filter === \"partial\") return inv.remainingBalance > 0 && inv.totalPaid > 0\n    if (filter === \"paid\") return inv.isPaid\n    return true\n  })\n\n  const openInvoices = invoices.filter(inv => inv.remainingBalance > 0)\n  const partialInvoices = openInvoices.filter(inv => inv.totalPaid > 0)\n  const totalOpen = openInvoices.reduce((sum, inv) => sum + inv.remainingBalance, 0)\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold\">إدارة الفواتير</h1>\n        <p className=\"text-muted-foreground\">\n          عرض وإدارة جميع الفواتير\n        </p>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">الفواتير المفتوحة</CardTitle>\n            <FileText className=\"h-4 w-4 text-blue-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{openInvoices.length}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">بانتظار الدفع</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">دفعات جزئية</CardTitle>\n            <FileText className=\"h-4 w-4 text-purple-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{partialInvoices.length}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">تم سداد جزء من المبلغ</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">المستحق الكلي</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-orange-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-orange-600\">\n              {totalOpen.toLocaleString()} ج.م\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">من الفواتير المفتوحة</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">الفواتير المدفوعة</CardTitle>\n            <Check className=\"h-4 w-4 text-green-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{invoices.filter(inv => inv.isPaid).length}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">مكتملة ومغلقة</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filter Buttons */}\n      <div className=\"flex flex-wrap gap-2\">\n        <Button\n          variant={filter === \"open\" ? \"default\" : \"outline\"}\n          onClick={() => setFilter(\"open\")}\n        >\n          مفتوح\n        </Button>\n        <Button\n          variant={filter === \"partial\" ? \"default\" : \"outline\"}\n          onClick={() => setFilter(\"partial\")}\n        >\n          دفع جزئي\n        </Button>\n        <Button\n          variant={filter === \"all\" ? \"default\" : \"outline\"}\n          onClick={() => setFilter(\"all\")}\n        >\n          الكل\n        </Button>\n        <Button\n          variant={filter === \"paid\" ? \"default\" : \"outline\"}\n          onClick={() => setFilter(\"paid\")}\n        >\n          مدفوع\n        </Button>\n      </div>\n\n      {/* Invoices Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>الفواتير</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {loading ? (\n            <div className=\"space-y-2\">\n              {[...Array(5)].map((_, i) => (\n                <Skeleton key={i} className=\"h-12 w-full\" />\n              ))}\n            </div>\n          ) : filteredInvoices.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              لا توجد فواتير\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>رقم الفاتورة</TableHead>\n                    <TableHead>المشروع</TableHead>\n                    <TableHead>الوحدة</TableHead>\n                    <TableHead>النوع</TableHead>\n                    <TableHead className=\"text-right\">المبلغ</TableHead>\n                    <TableHead className=\"text-right\">المتبقي</TableHead>\n                    <TableHead>الحالة</TableHead>\n                    <TableHead></TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredInvoices.map((invoice) => (\n                    <TableRow key={invoice.id}>\n                      <TableCell className=\"font-medium\">\n                        {invoice.invoiceNumber}\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"text-sm\">{invoice.unit.project.name}</div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {invoice.unit.code}\n                        </div>\n                      </TableCell>\n                      <TableCell>{invoice.unit.name}</TableCell>\n                      <TableCell>\n                        <Badge variant=\"outline\">\n                          {invoice.type === \"MANAGEMENT_SERVICE\"\n                            ? \"خدمات\"\n                            : \"مطالبة\"}\n                        </Badge>\n                      </TableCell>\n                      <TableCell className=\"text-right font-medium\">\n                        {invoice.amount.toLocaleString()} ج.م\n                      </TableCell>\n                      <TableCell className=\"text-right font-medium\">\n                        <span className={invoice.remainingBalance > 0 ? \"text-orange-600\" : \"text-green-600\"}>\n                          {invoice.remainingBalance.toLocaleString()} ج.م\n                        </span>\n                      </TableCell>\n                      <TableCell>\n                        <Badge\n                          variant={invoice.isPaid ? \"default\" : \"secondary\"}\n                          className={invoice.isPaid ? \"bg-green-600\" : \"bg-orange-600\"}\n                        >\n                          {invoice.isPaid ? \"مدفوع\" : \"مفتوح\"}\n                        </Badge>\n                      </TableCell>\n                      <TableCell className=\"text-right\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => {\n                            setSelectedInvoice(invoice)\n                            setPaymentAmount(\"\")\n                            setShowDialog(true)\n                          }}\n                        >\n                          تفاصيل\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Invoice Details Dialog */}\n      <Dialog open={showDialog} onOpenChange={setShowDialog}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>تفاصيل الفاتورة</DialogTitle>\n            <DialogDescription>\n              {selectedInvoice?.invoiceNumber}\n            </DialogDescription>\n          </DialogHeader>\n\n          {selectedInvoice && (\n            <div className=\"space-y-6\">\n              {/* Invoice Header Info */}\n              <div className=\"grid grid-cols-2 gap-4 pb-4 border-b\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">المشروع</p>\n                  <p className=\"font-medium\">{selectedInvoice.unit.project.name}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">الوحدة</p>\n                  <p className=\"font-medium\">{selectedInvoice.unit.name}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">رقم الوحدة</p>\n                  <p className=\"font-medium\">{selectedInvoice.unit.code}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">نوع الفاتورة</p>\n                  <p className=\"font-medium\">\n                    {selectedInvoice.type === \"MANAGEMENT_SERVICE\"\n                      ? \"فاتورة خدمات\"\n                      : \"فاتورة مطالبة\"}\n                  </p>\n                </div>\n              </div>\n\n              {/* Expenses Table */}\n              {selectedInvoice.expenses && selectedInvoice.expenses.length > 0 && (\n                <div>\n                  <h3 className=\"font-semibold mb-3\">المصاريف المرتبطة</h3>\n                  <div className=\"overflow-x-auto border rounded-lg\">\n                    <Table>\n                      <TableHeader className=\"bg-gray-50 dark:bg-gray-900\">\n                        <TableRow>\n                          <TableHead>الوصف</TableHead>\n                          <TableHead className=\"text-right\">المبلغ</TableHead>\n                          <TableHead className=\"text-right\">النوع</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {selectedInvoice.expenses.map((expense) => (\n                          <TableRow key={expense.id}>\n                            <TableCell className=\"font-medium\">{expense.description}</TableCell>\n                            <TableCell className=\"text-right font-medium\">\n                              {expense.amount.toLocaleString()} ج.م\n                            </TableCell>\n                            <TableCell className=\"text-right text-sm text-muted-foreground\">\n                              {expense.sourceType}\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </div>\n                </div>\n              )}\n\n              {/* Amount Summary */}\n              <div className=\"space-y-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg\">\n                <div className=\"flex items-center justify-between\">\n                  <p className=\"text-sm text-muted-foreground\">إجمالي المبلغ</p>\n                  <p className=\"font-semibold text-lg\">\n                    {selectedInvoice.amount.toLocaleString()} ج.م\n                  </p>\n                </div>\n                <div className=\"flex items-center justify-between pt-2 border-t\">\n                  <p className=\"text-sm text-muted-foreground\">المدفوع</p>\n                  <p className=\"font-semibold text-lg text-green-600\">\n                    {(selectedInvoice.totalPaid || 0).toLocaleString()} ج.م\n                  </p>\n                </div>\n                <div className=\"flex items-center justify-between pt-2 border-t\">\n                  <p className=\"text-sm text-muted-foreground\">المتبقي</p>\n                  <p className=\"font-semibold text-lg text-orange-600\">\n                    {selectedInvoice.remainingBalance.toLocaleString()} ج.م\n                  </p>\n                </div>\n                <div className=\"flex items-center justify-between pt-2 border-t\">\n                  <p className=\"text-sm text-muted-foreground\">الحالة</p>\n                  <Badge\n                    className={\n                      selectedInvoice.isPaid ? \"bg-green-600\" : \"bg-orange-600\"\n                    }\n                  >\n                    {selectedInvoice.isPaid ? \"مدفوع\" : \"مفتوح\"}\n                  </Badge>\n                </div>\n              </div>\n\n              {/* Payment Section */}\n              {!selectedInvoice.isPaid && (\n                <div className=\"space-y-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\n                  <h3 className=\"font-semibold\">دفع الفاتورة</h3>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"paymentAmount\">مبلغ الدفع (ج.م)</Label>\n                    <Input\n                      id=\"paymentAmount\"\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      max={selectedInvoice.remainingBalance}\n                      value={paymentAmount}\n                      onChange={(e) => setPaymentAmount(e.target.value)}\n                      placeholder={`أقصى: ${selectedInvoice.remainingBalance.toLocaleString()}`}\n                      disabled={paying}\n                    />\n                    <p className=\"text-xs text-muted-foreground\">\n                      المتبقي: {selectedInvoice.remainingBalance.toLocaleString()} ج.م\n                    </p>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => setPaymentAmount(selectedInvoice.remainingBalance.toString())}\n                      disabled={paying}\n                      className=\"flex-1\"\n                    >\n                      دفع كامل المبلغ\n                    </Button>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          <DialogFooter className=\"gap-2\">\n            <Button variant=\"outline\" onClick={() => setShowDialog(false)} disabled={paying}>\n              إغلاق\n            </Button>\n            {selectedInvoice && !selectedInvoice.isPaid && (\n              <Button\n                onClick={handlePayment}\n                disabled={paying || !paymentAmount}\n                className=\"bg-green-600 hover:bg-green-700\"\n              >\n                {paying ? \"جاري الدفع...\" : \"تأكيد الدفع\"}\n              </Button>\n            )}\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}