module.exports=[30788,(a,b,c)=>{"use strict";var d=a.r(68599);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},76053,(a,b,c)=>{"use strict";b.exports=a.r(30788)},15540,a=>{"use strict";var b=a.i(43713),c=a.i(84642),d=a.i(17545),e=a.i(68599),f=a.i(53053),g=a.i(46382),h=a.i(90306);let i=(0,h.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var j=a.i(52341),k=a.i(22654),l=a.i(49015),m=a.i(49466),n=a.i(27167);let o=(0,h.default)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),p=(0,h.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var q=a.i(23384);let r=(0,h.default)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);var s=a.i(63395),t=a.i(39060),u=a.i(32140);a.i(18381);var v=a.i(48070),w=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,c)=>{let d=(0,v.createSlot)(`Primitive.${c}`),f=e.forwardRef((a,e)=>{let{asChild:f,...g}=a;return(0,b.jsx)(f?d:c,{...g,ref:e})});return f.displayName=`Primitive.${c}`,{...a,[c]:f}},{}),x=a.i(76053);function y(){return()=>{}}var z="Avatar",[A,B]=function(a,c=[]){let d=[],f=()=>{let b=d.map(a=>e.createContext(a));return function(c){let d=c?.[a]||b;return e.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return f.scopeName=a,[function(c,f){let g=e.createContext(f);g.displayName=c+"Context";let h=d.length;d=[...d,f];let i=c=>{let{scope:d,children:f,...i}=c,j=d?.[a]?.[h]||g,k=e.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})};return i.displayName=c+"Provider",[i,function(b,d){let i=d?.[a]?.[h]||g,j=e.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${c}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return e.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(f,...c)]}(z),[C,D]=A(z),E=e.forwardRef((a,c)=>{let{__scopeAvatar:d,...f}=a,[g,h]=e.useState("idle");return(0,b.jsx)(C,{scope:d,imageLoadingStatus:g,onImageLoadingStatusChange:h,children:(0,b.jsx)(w.span,{...f,ref:c})})});E.displayName=z;var F="AvatarImage";e.forwardRef((a,c)=>{let{__scopeAvatar:d,src:f,onLoadingStatusChange:g=()=>{},...h}=a,i=D(F,d),j=function(a,{referrerPolicy:b,crossOrigin:c}){let d=(0,x.useSyncExternalStore)(y,()=>!0,()=>!1),f=e.useRef(null),g=d?(f.current||(f.current=new window.Image),f.current):null,[h,i]=e.useState(()=>I(g,a));return(0,u.useLayoutEffect)(()=>{i(I(g,a))},[g,a]),(0,u.useLayoutEffect)(()=>{let a=a=>()=>{i(a)};if(!g)return;let d=a("loaded"),e=a("error");return g.addEventListener("load",d),g.addEventListener("error",e),b&&(g.referrerPolicy=b),"string"==typeof c&&(g.crossOrigin=c),()=>{g.removeEventListener("load",d),g.removeEventListener("error",e)}},[g,c,b]),h}(f,h),k=(0,t.useCallbackRef)(a=>{g(a),i.onImageLoadingStatusChange(a)});return(0,u.useLayoutEffect)(()=>{"idle"!==j&&k(j)},[j,k]),"loaded"===j?(0,b.jsx)(w.img,{...h,ref:c,src:f}):null}).displayName=F;var G="AvatarFallback",H=e.forwardRef((a,c)=>{let{__scopeAvatar:d,delayMs:f,...g}=a,h=D(G,d),[i,j]=e.useState(void 0===f);return e.useEffect(()=>{if(void 0!==f){let a=window.setTimeout(()=>j(!0),f);return()=>window.clearTimeout(a)}},[f]),i&&"loaded"!==h.imageLoadingStatus?(0,b.jsx)(w.span,{...g,ref:c}):null});function I(a,b){return a?b?(a.src!==b&&(a.src=b),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}H.displayName=G;var J=a.i(41662);function K({className:a,...c}){return(0,b.jsx)(E,{"data-slot":"avatar",className:(0,J.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...c})}function L({className:a,...c}){return(0,b.jsx)(H,{"data-slot":"avatar-fallback",className:(0,J.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...c})}var M=a.i(17272),N=a.i(97882),O=a.i(68622);function P({...a}){return(0,b.jsx)(N.Root,{"data-slot":"sheet",...a})}function Q({...a}){return(0,b.jsx)(N.Trigger,{"data-slot":"sheet-trigger",...a})}function R({...a}){return(0,b.jsx)(N.Portal,{"data-slot":"sheet-portal",...a})}function S({className:a,...c}){return(0,b.jsx)(N.Overlay,{"data-slot":"sheet-overlay",className:(0,J.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...c})}function T({className:a,children:c,side:d="right",...e}){return(0,b.jsxs)(R,{children:[(0,b.jsx)(S,{}),(0,b.jsxs)(N.Content,{"data-slot":"sheet-content",className:(0,J.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===d&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===d&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===d&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===d&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",a),...e,children:[c,(0,b.jsxs)(N.Close,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,b.jsx)(O.XIcon,{className:"size-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}let U={ADMIN:[{name:"لوحة التحكم",href:"/dashboard",icon:i},{name:"المشاريع",href:"/dashboard/projects",icon:g.Building2},{name:"أنواع المشاريع",href:"/dashboard/admin/project-types",icon:g.Building2},{name:"الوحدات السكنية",href:"/dashboard/operational-units",icon:g.Building2},{name:"السكان",href:"/dashboard/residents",icon:m.Users},{name:"التذاكر",href:"/dashboard/tickets",icon:j.Ticket},{name:"أعمال التقنيين",href:"/dashboard/technician-work",icon:k.FileText},{name:"ملاحظات المحاسبة",href:"/dashboard/accounting-notes",icon:k.FileText},{name:"الفواتير",href:"/dashboard/invoices",icon:l.DollarSign},{name:"المدفوعات",href:"/dashboard/payments",icon:l.DollarSign},{name:"النفقات التشغيلية",href:"/dashboard/accountant/operational-expenses",icon:l.DollarSign},{name:"العهد المالية",href:"/dashboard/admin/pm-advances",icon:l.DollarSign},{name:"أرقام مديري المشاريع",href:"/dashboard/admin/pm-contacts",icon:n.Phone},{name:"صلاحيات مديري المشاريع",href:"/dashboard/admin/pm-permissions",icon:m.Users},{name:"الموظفون",href:"/dashboard/staff",icon:m.Users},{name:"الرواتب الشهرية",href:"/dashboard/admin/payroll",icon:l.DollarSign},{name:"سلفات الموظفين",href:"/dashboard/admin/staff-advances",icon:l.DollarSign},{name:"التقنيون",href:"/dashboard/technicians",icon:m.Users},{name:"الإعدادات",href:"/dashboard/settings",icon:o}],PROJECT_MANAGER:[{name:"لوحة التحكم",href:"/dashboard",icon:i},{name:"مشاريعي",href:"/dashboard/projects",icon:g.Building2},{name:"التذاكر",href:"/dashboard/tickets",icon:j.Ticket},{name:"أعمال التقنيين",href:"/dashboard/technician-work",icon:k.FileText},{name:"النفقات التشغيلية",href:"/dashboard/manager/operational-expenses",icon:l.DollarSign},{name:"السكان",href:"/dashboard/residents",icon:m.Users}],ACCOUNTANT:[{name:"لوحة التحكم",href:"/dashboard",icon:i},{name:"ملاحظات المحاسبة",href:"/dashboard/accounting-notes",icon:k.FileText},{name:"الفواتير",href:"/dashboard/invoices",icon:l.DollarSign},{name:"المدفوعات",href:"/dashboard/payments",icon:l.DollarSign},{name:"النفقات التشغيلية",href:"/dashboard/accountant/operational-expenses",icon:l.DollarSign},{name:"العهد المالية",href:"/dashboard/accountant/pm-advances",icon:l.DollarSign},{name:"رواتب التقنيين",href:"/dashboard/technician-payments",icon:l.DollarSign},{name:"الرواتب الشهرية",href:"/dashboard/accountant/payroll",icon:l.DollarSign},{name:"سلفات الموظفين",href:"/dashboard/accountant/staff-advances",icon:l.DollarSign}]};function V({userRole:a,pathname:d}){let e=U[a]||[];return(0,b.jsxs)("div",{className:"flex flex-col h-full",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 px-6 py-8 border-b border-zinc-800",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,b.jsx)(g.Building2,{className:"w-6 h-6 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"font-bold text-lg text-white",children:"إدارة العمليات"}),(0,b.jsx)("p",{className:"text-xs text-zinc-400 mt-1",children:"ADMIN"===a?"مسؤول نظام":"PROJECT_MANAGER"===a?"مدير المشروع":"المحاسب"})]})]}),(0,b.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:e.map(a=>{let c=d===a.href||d.startsWith(`${a.href}/`);return(0,b.jsxs)(f.default,{href:a.href,className:`flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${c?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 shadow-lg shadow-emerald-500/10":"text-zinc-400 hover:bg-zinc-800/50 hover:text-white"}`,children:[(0,b.jsx)(a.icon,{className:"w-5 h-5 flex-shrink-0"}),(0,b.jsx)("span",{children:a.name})]},a.name)})}),(0,b.jsxs)("div",{className:"border-t border-zinc-800 p-6 space-y-3",children:[(0,b.jsxs)("div",{className:"px-3 py-2",children:[(0,b.jsx)("p",{className:"text-xs text-zinc-500 mb-2",children:"مسجل دخول باسم"}),(0,b.jsx)("p",{className:"text-sm font-medium text-white truncate",children:"أنت"})]}),(0,b.jsxs)(s.Button,{variant:"ghost",className:"w-full justify-center gap-2 text-zinc-400 hover:text-red-400 hover:bg-red-500/10",onClick:()=>(0,c.signOut)({callbackUrl:"/login"}),children:[(0,b.jsx)(p,{className:"w-4 h-4"}),"تسجيل الخروج"]})]})]})}function W({children:a}){let{data:h,status:i}=(0,c.useSession)(),j=(0,d.useRouter)(),k=(0,d.usePathname)();if((0,e.useEffect)(()=>{"unauthenticated"===i&&j.push("/login")},[i,j]),"loading"===i)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(!h)return null;let l=h.user.role,m=U[l]||[];return(0,b.jsxs)("div",{className:"min-h-screen bg-background flex",children:[(0,b.jsx)("aside",{"data-print-hide":"true",className:"hidden lg:flex w-72 flex-col border-l border-zinc-800 bg-zinc-950/80 backdrop-blur h-screen sticky right-0 top-0",children:(0,b.jsx)(V,{userRole:l,pathname:k})}),(0,b.jsxs)("main",{className:"flex-1 flex flex-col min-h-screen",children:[(0,b.jsx)("div",{"data-print-hide":"true",className:"lg:hidden border-b border-gray-200 bg-white sticky top-0 z-50",children:(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center",children:(0,b.jsx)(g.Building2,{className:"w-5 h-5 text-gray-600"})}),(0,b.jsx)("span",{className:"font-semibold text-lg text-gray-900",children:"إدارة العمليات"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Button,{variant:"ghost",size:"icon",className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:(0,b.jsx)(q.Bell,{className:"w-5 h-5"})}),(0,b.jsxs)(P,{children:[(0,b.jsx)(Q,{asChild:!0,children:(0,b.jsx)(s.Button,{variant:"ghost",size:"icon",className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:(0,b.jsx)(r,{className:"w-5 h-5"})})}),(0,b.jsx)(T,{side:"right",className:"p-0 w-72 bg-zinc-950 border-l border-zinc-800",children:(0,b.jsx)(V,{userRole:l,pathname:k})})]})]})]})}),(0,b.jsxs)("header",{"data-print-hide":"true",className:"hidden lg:flex items-center justify-between border-b border-gray-200 px-8 py-5 bg-white sticky top-0 z-40",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:m.find(a=>k===a.href||k.startsWith(`${a.href}/`))?.name||"لوحة التحكم"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["مرحبا، ",h?.user.name]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(s.Button,{variant:"ghost",size:"icon",className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:(0,b.jsx)(q.Bell,{className:"w-5 h-5"})}),(0,b.jsxs)(M.DropdownMenu,{children:[(0,b.jsx)(M.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(s.Button,{variant:"ghost",className:"gap-2",children:[(0,b.jsx)(K,{className:"w-8 h-8",children:(0,b.jsx)(L,{className:"bg-primary text-primary-foreground",children:h.user.name?.split(" ").map(a=>a[0]).join("")||"U"})}),(0,b.jsx)("span",{className:"text-sm text-gray-900",children:h.user.name})]})}),(0,b.jsxs)(M.DropdownMenuContent,{align:"end",className:"w-56 bg-white border-gray-200",children:[(0,b.jsx)(M.DropdownMenuLabel,{className:"text-gray-900",children:"حسابي"}),(0,b.jsx)(M.DropdownMenuSeparator,{}),(0,b.jsx)(M.DropdownMenuItem,{asChild:!0,children:(0,b.jsx)(f.default,{href:"/dashboard/settings",className:"text-gray-900 hover:bg-gray-100",children:"الإعدادات"})}),(0,b.jsx)(M.DropdownMenuSeparator,{}),(0,b.jsxs)(M.DropdownMenuItem,{onClick:()=>(0,c.signOut)({callbackUrl:"/login"}),className:"text-red-600 hover:bg-red-50",children:[(0,b.jsx)(p,{className:"mr-2 h-4 w-4"}),"تسجيل الخروج"]})]})]})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto bg-background",children:a})]})]})}a.s(["default",()=>W],15540)}];

//# sourceMappingURL=Desktop_cmd-main_adf2ebe1._.js.map