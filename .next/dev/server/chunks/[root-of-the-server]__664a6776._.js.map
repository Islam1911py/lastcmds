{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/cmd-main/src/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const db =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: ['query'],\n  })\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = db"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,KACX,gBAAgB,MAAM,IACtB,IAAI,gOAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/cmd-main/src/lib/auth.ts"],"sourcesContent":["import { NextAuthOptions } from \"next-auth\"\nimport CredentialsProvider from \"next-auth/providers/credentials\"\nimport { db } from \"@/lib/db\"\nimport bcrypt from \"bcryptjs\"\n\nexport const authOptions: NextAuthOptions = {\n  providers: [\n    CredentialsProvider({\n      name: \"credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" }\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) {\n          throw new Error(\"Invalid credentials\")\n        }\n\n        const user = await db.user.findUnique({\n          where: { email: credentials.email },\n          include: {\n            assignedProjects: {\n              include: {\n                project: true\n              }\n            }\n          }\n        })\n\n        if (!user) {\n          throw new Error(\"Invalid credentials\")\n        }\n\n        const isPasswordValid = await bcrypt.compare(\n          credentials.password,\n          user.password\n        )\n\n        if (!isPasswordValid) {\n          throw new Error(\"Invalid credentials\")\n        }\n\n        // Return user data for session\n        return {\n          id: user.id,\n          email: user.email,\n          name: user.name,\n          role: user.role,\n          projectIds: user.assignedProjects.map(ap => ap.projectId),\n          canViewAllProjects: user.canViewAllProjects\n        }\n      }\n    })\n  ],\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.id = user.id\n        token.role = user.role\n        token.projectIds = user.projectIds\n        token.canViewAllProjects = user.canViewAllProjects\n      }\n      return token\n    },\n    async session({ session, token }) {\n      if (session.user) {\n        session.user.id = token.id as string\n        session.user.role = token.role as string\n        session.user.projectIds = token.projectIds as string[]\n        session.user.canViewAllProjects = token.canViewAllProjects as boolean\n      }\n      return session\n    }\n  },\n  pages: {\n    signIn: \"/login\",\n    error: \"/login\"\n  },\n  session: {\n    strategy: \"jwt\",\n    maxAge: 30 * 24 * 60 * 60 // 30 days\n  },\n  secret: process.env.NEXTAUTH_SECRET\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;AAEO,MAAM,cAA+B;IAC1C,WAAW;QACT,IAAA,+LAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBACjD,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM,OAAO,MAAM,kJAAE,CAAC,IAAI,CAAC,UAAU,CAAC;oBACpC,OAAO;wBAAE,OAAO,YAAY,KAAK;oBAAC;oBAClC,SAAS;wBACP,kBAAkB;4BAChB,SAAS;gCACP,SAAS;4BACX;wBACF;oBACF;gBACF;gBAEA,IAAI,CAAC,MAAM;oBACT,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM,kBAAkB,MAAM,wKAAM,CAAC,OAAO,CAC1C,YAAY,QAAQ,EACpB,KAAK,QAAQ;gBAGf,IAAI,CAAC,iBAAiB;oBACpB,MAAM,IAAI,MAAM;gBAClB;gBAEA,+BAA+B;gBAC/B,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,MAAM,KAAK,IAAI;oBACf,YAAY,KAAK,gBAAgB,CAAC,GAAG,CAAC,CAAA,KAAM,GAAG,SAAS;oBACxD,oBAAoB,KAAK,kBAAkB;gBAC7C;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,KAAK,IAAI;gBACtB,MAAM,UAAU,GAAG,KAAK,UAAU;gBAClC,MAAM,kBAAkB,GAAG,KAAK,kBAAkB;YACpD;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,QAAQ,IAAI,EAAE;gBAChB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;gBAC9B,QAAQ,IAAI,CAAC,UAAU,GAAG,MAAM,UAAU;gBAC1C,QAAQ,IAAI,CAAC,kBAAkB,GAAG,MAAM,kBAAkB;YAC5D;YACA,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;QACR,OAAO;IACT;IACA,SAAS;QACP,UAAU;QACV,QAAQ,KAAK,KAAK,KAAK,GAAG,UAAU;IACtC;IACA,QAAQ,QAAQ,GAAG,CAAC,eAAe;AACrC"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/cmd-main/src/app/api/accounting-notes/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\nimport { getServerSession } from \"next-auth\"\nimport { authOptions } from \"@/lib/auth\"\nimport { db as prisma } from \"@/lib/db\"\n\n// GET /api/accounting-notes - List accounting notes (Inbox for Accountant)\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await getServerSession(authOptions)\n\n    if (!session) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const searchParams = req.nextUrl.searchParams\n    const status = searchParams.get(\"status\")\n    const projectId = searchParams.get(\"projectId\")\n\n    const filters: any[] = []\n\n    if (status) {\n      filters.push({ status })\n    }\n\n    if (projectId) {\n      filters.push({ projectId })\n    }\n\n    if (session.user.role === \"PROJECT_MANAGER\") {\n      const assignedProjectIds = session.user.projectIds || []\n\n      if (!session.user.canViewAllProjects) {\n        if (projectId && !assignedProjectIds.includes(projectId)) {\n          return NextResponse.json({ error: \"Forbidden\" }, { status: 403 })\n        }\n\n        if (assignedProjectIds.length === 0) {\n          return NextResponse.json([])\n        }\n\n        filters.push({\n          OR: [\n            { createdByUserId: session.user.id },\n            { projectId: { in: assignedProjectIds } }\n          ]\n        })\n      }\n    } else if (session.user.role !== \"ACCOUNTANT\" && session.user.role !== \"ADMIN\") {\n      return NextResponse.json({ error: \"Forbidden\" }, { status: 403 })\n    }\n\n    const where = filters.length > 0 ? { AND: filters } : undefined\n\n    // Fetch accounting notes with relations\n    const notes = await prisma.accountingNote.findMany({\n      where,\n      include: {\n        unit: {\n          include: {\n            project: true\n          }\n        },\n        project: true,\n        createdByUser: {\n          select: {\n            id: true,\n            name: true,\n            email: true\n          }\n        },\n        convertedToExpense: {\n          include: {\n            recordedByUser: {\n              select: {\n                id: true,\n                name: true,\n                email: true\n              }\n            }\n          }\n        },\n        pmAdvance: {\n          include: {\n            staff: {\n              select: { id: true, name: true }\n            }\n          }\n        }\n      },\n      orderBy: {\n        createdAt: \"desc\"\n      }\n    })\n\n    return NextResponse.json(notes)\n  } catch (error) {\n    console.error(\"Error fetching accounting notes:\", error)\n    return NextResponse.json(\n      { error: \"Failed to fetch accounting notes\" },\n      { status: 500 }\n    )\n  }\n}\n\n// POST /api/accounting-notes - Create accounting note (PM creates from field)\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await getServerSession(authOptions)\n\n    if (!session) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    // Only Project Managers and Admin can create accounting notes\n    if (session.user.role !== \"PROJECT_MANAGER\" && session.user.role !== \"ADMIN\") {\n      return NextResponse.json({ error: \"Forbidden\" }, { status: 403 })\n    }\n\n    const body = await req.json()\n    const {\n      projectId,\n      unitId,\n      description,\n      amount,\n      sourceType = \"OFFICE_FUND\",\n      pmAdvanceId\n    } = body\n\n    const normalizedDescription = typeof description === \"string\" ? description.trim() : \"\"\n    const parsedAmount = Number(amount)\n\n    // Validate required fields\n    if (!projectId || !unitId || !normalizedDescription || parsedAmount <= 0 || Number.isNaN(parsedAmount)) {\n      return NextResponse.json(\n        { error: \"Missing required fields\" },\n        { status: 400 }\n      )\n    }\n\n    if (sourceType !== \"OFFICE_FUND\" && sourceType !== \"PM_ADVANCE\") {\n      return NextResponse.json(\n        { error: \"Invalid source type. Must be OFFICE_FUND or PM_ADVANCE\" },\n        { status: 400 }\n      )\n    }\n\n    if (sourceType === \"PM_ADVANCE\" && !pmAdvanceId) {\n      return NextResponse.json(\n        { error: \"pmAdvanceId is required when sourceType is PM_ADVANCE\" },\n        { status: 400 }\n      )\n    }\n\n    // Get operational unit to validate it belongs to project\n    const unit = await prisma.operationalUnit.findUnique({\n      where: { id: unitId },\n      include: { project: true }\n    })\n\n    if (!unit) {\n      return NextResponse.json(\n        { error: \"Operational unit not found\" },\n        { status: 404 }\n      )\n    }\n\n    if (unit.projectId !== projectId) {\n      return NextResponse.json(\n        { error: \"Unit does not belong to the specified project\" },\n        { status: 400 }\n      )\n    }\n\n    // Check if PM is assigned to this project (if PROJECT_MANAGER role)\n    if (session.user.role === \"PROJECT_MANAGER\") {\n      const assignment = await prisma.projectAssignment.findFirst({\n        where: {\n          userId: session.user.id,\n          projectId: projectId\n        }\n      })\n\n      if (!assignment) {\n        return NextResponse.json(\n          { error: \"You are not assigned to this project\" },\n          { status: 403 }\n        )\n      }\n    }\n\n    if (sourceType === \"PM_ADVANCE\" && pmAdvanceId) {\n      const advance = await prisma.pMAdvance.findUnique({\n        where: { id: pmAdvanceId }\n      })\n\n      if (!advance) {\n        return NextResponse.json({ error: \"PM Advance not found\" }, { status: 404 })\n      }\n    }\n\n    // Create accounting note\n    const accountingNote = await prisma.accountingNote.create({\n      data: {\n        projectId,\n        unitId,\n        createdByUserId: session.user.id,\n        description: normalizedDescription,\n        amount: parsedAmount,\n        status: \"PENDING\",\n        sourceType,\n        pmAdvanceId: sourceType === \"PM_ADVANCE\" ? pmAdvanceId : null\n      },\n      include: {\n        unit: {\n          include: {\n            project: true\n          }\n        },\n        project: true,\n        createdByUser: {\n          select: {\n            id: true,\n            name: true,\n            email: true\n          }\n        },\n        pmAdvance: {\n          include: {\n            staff: {\n              select: { id: true, name: true }\n            }\n          }\n        }\n      }\n    })\n\n    return NextResponse.json(accountingNote, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating accounting note:\", error)\n    return NextResponse.json(\n      { error: \"Failed to create accounting note\" },\n      { status: 500 }\n    )\n  }\n}\n\n// PATCH /api/accounting-notes?id=xxx - Record/Convert accounting note to invoice\nexport async function PATCH(req: NextRequest) {\n  try {\n    const session = await getServerSession(authOptions)\n\n    if (!session?.user?.id) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    // Only Accountant and Admin can record (convert) notes\n    if (session.user.role !== \"ACCOUNTANT\" && session.user.role !== \"ADMIN\") {\n      return NextResponse.json({ error: \"Forbidden\" }, { status: 403 })\n    }\n\n    const body = await req.json()\n    const { noteId, sourceType, pmAdvanceId } = body\n\n    if (!noteId) {\n      return NextResponse.json(\n        { error: \"Missing required field: noteId\" },\n        { status: 400 }\n      )\n    }\n\n    // Fetch accounting note\n    const note = await prisma.accountingNote.findUnique({\n      where: { id: noteId },\n      include: {\n        unit: {\n          include: { project: true }\n        },\n        project: true,\n        convertedToExpense: {\n          include: {\n            recordedByUser: {\n              select: {\n                id: true,\n                name: true,\n                email: true\n              }\n            }\n          }\n        },\n        pmAdvance: true\n      }\n    })\n\n    if (!note) {\n      console.error(\"âŒ Note not found:\", noteId)\n      return NextResponse.json({ error: \"Accounting note not found\" }, { status: 404 })\n    }\n\n    console.log(\"âœ“ Note found:\", { id: note.id, status: note.status, amount: note.amount, unitId: note.unitId, projectId: note.projectId })\n\n    if (note.status !== \"PENDING\") {\n      console.error(\"âŒ Note already recorded:\", note.status)\n      return NextResponse.json(\n        { error: \"This note has already been recorded\", status: note.status },\n        { status: 400 }\n      )\n    }\n\n    const resolvedSourceType = sourceType ?? note.sourceType\n    const resolvedPmAdvanceId = pmAdvanceId ?? note.pmAdvanceId\n\n    if (resolvedSourceType !== \"OFFICE_FUND\" && resolvedSourceType !== \"PM_ADVANCE\") {\n      return NextResponse.json(\n        { error: \"Invalid source type\" },\n        { status: 400 }\n      )\n    }\n\n    if (resolvedSourceType === \"PM_ADVANCE\" && !resolvedPmAdvanceId) {\n      return NextResponse.json(\n        { error: \"PM advance is required when source type is PM_ADVANCE\" },\n        { status: 400 }\n      )\n    }\n\n    // Validate PM Advance if sourceType is PM_ADVANCE\n    if (resolvedSourceType === \"PM_ADVANCE\" && resolvedPmAdvanceId) {\n      const pmAdvance = await prisma.pMAdvance.findUnique({\n        where: { id: resolvedPmAdvanceId }\n      })\n\n      if (!pmAdvance) {\n        console.error(\"âŒ PM Advance not found:\", resolvedPmAdvanceId)\n        return NextResponse.json({ error: \"PM Advance not found\" }, { status: 404 })\n      }\n\n      if (pmAdvance.remainingAmount < note.amount) {\n        console.error(\"âŒ Insufficient balance:\", { remaining: pmAdvance.remainingAmount, needed: note.amount })\n        return NextResponse.json(\n          { error: \"Insufficient PM Advance balance\", remaining: pmAdvance.remainingAmount, needed: note.amount },\n          { status: 400 }\n        )\n      }\n      console.log(\"âœ“ PM Advance validated:\", { id: resolvedPmAdvanceId, remaining: pmAdvance.remainingAmount })\n    } else if (resolvedSourceType === \"PM_ADVANCE\" && !resolvedPmAdvanceId) {\n      console.warn(\"âš  PM_ADVANCE selected but no pmAdvanceId provided\")\n    }\n\n    // Get or create owner association for this unit\n    let ownerAssociation = await prisma.ownerAssociation.findFirst({\n      where: { unitId: note.unitId }\n    })\n\n    if (!ownerAssociation) {\n      console.log(\"ðŸ”¨ Creating new owner association for unit:\", note.unitId)\n      ownerAssociation = await prisma.ownerAssociation.create({\n        data: {\n          name: `Owner - ${note.unit.name}`,\n          unitId: note.unitId,\n          phone: \"\",\n          email: \"\"\n        }\n      })\n      console.log(\"âœ“ Owner association created:\", ownerAssociation.id)\n    } else {\n      console.log(\"âœ“ Owner association found:\", ownerAssociation.id)\n    }\n\n    // Create a CLAIM invoice for this note\n    const invoiceNumber = `CLM-${Date.now()}-${note.unit.code}`\n    console.log(\"ðŸ”¨ Creating invoice:\", invoiceNumber)\n    const invoice = await prisma.invoice.create({\n      data: {\n        invoiceNumber,\n        type: \"CLAIM\",\n        unitId: note.unitId,\n        ownerAssociationId: ownerAssociation.id,\n        amount: note.amount,\n        remainingBalance: note.amount\n      }\n    })\n    console.log(\"âœ“ Invoice created:\", { id: invoice.id, invoiceNumber, amount: invoice.amount })\n\n    // Create operational expense record\n    console.log(\"ðŸ”¨ Creating operational expense\")\n    const expense = await prisma.operationalExpense.create({\n      data: {\n        description: note.description,\n        amount: note.amount,\n        sourceType: resolvedSourceType,\n        unitId: note.unitId,\n        claimInvoiceId: invoice.id,\n        recordedByUserId: session.user.id,\n        pmAdvanceId: resolvedSourceType === \"PM_ADVANCE\" ? resolvedPmAdvanceId : null,\n        convertedFromNoteId: noteId  // Link back to the accounting note\n      }\n    })\n    console.log(\"âœ“ Operational expense created:\", { id: expense.id, sourceType: resolvedSourceType, amount: expense.amount })\n\n    // Deduct from PM Advance if applicable\n    if (resolvedSourceType === \"PM_ADVANCE\" && resolvedPmAdvanceId) {\n      console.log(\"ðŸ’° Deducting from PM Advance:\", { pmAdvanceId: resolvedPmAdvanceId, amount: note.amount })\n      await prisma.pMAdvance.update({\n        where: { id: resolvedPmAdvanceId },\n        data: {\n          remainingAmount: {\n            decrement: note.amount\n          }\n        }\n      })\n      console.log(\"âœ“ PM Advance deducted successfully\")\n    }\n\n    // Update accounting note status\n    console.log(\"ðŸ”¨ Updating note status to CONVERTED\")\n    await prisma.accountingNote.update({\n      where: { id: noteId },\n      data: {\n        status: \"CONVERTED\",\n        convertedToExpenseId: expense.id,\n        convertedAt: new Date(),\n        pmAdvanceId: resolvedSourceType === \"PM_ADVANCE\" ? resolvedPmAdvanceId : null,\n        sourceType: resolvedSourceType\n      }\n    })\n    console.log(\"âœ“ Note updated to CONVERTED\")\n\n    return NextResponse.json({\n      success: true,\n      message: \"âœ“ Accounting note recorded successfully. Invoice created.\",\n      invoice,\n      expense,\n      invoiceNumber: invoice.invoiceNumber\n    })\n  } catch (error) {\n    console.error(\"âŒ Error recording accounting note:\", error)\n    const errorMessage = error instanceof Error ? error.message : String(error)\n    return NextResponse.json(\n      { error: \"Failed to record accounting note\", details: errorMessage },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":"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"}}]
}